<mat-card class="result">
  <mat-card-content>
    <h2 class="example-h2">Result</h2>
    <section class="example-section">
      <mat-slide-toggle
       (change)="showhidecolumn('edit')"
          [disabled]="false">
        Edit row on modal
      </mat-slide-toggle>
    </section>

    <section class="example-section">
      <mat-slide-toggle
       (change)="showhidecolumn('popup')"
          [disabled]="false">
        In line Edit row
      </mat-slide-toggle>
    </section>

    <section class="example-section">
      <mat-slide-toggle
        (change)="showhidecolumn('delete')"
          [disabled]="false">
        Delete Row
      </mat-slide-toggle>
    </section>
    <section class="example-section">
      <mat-slide-toggle (change)="showhidecolumn('select')"
          [disabled]="false">
        multi select
      </mat-slide-toggle>
    </section>

    <section class="example-section">
      <mat-slide-toggle [(ngModel)]="stikcyColumn" 
          [disabled]="false">
        Sticky Column
      </mat-slide-toggle>
    </section>

    <section class="example-section">
      <mat-slide-toggle [(ngModel)]="stickyHeader" 
          [disabled]="false">
        Sticky Header
      </mat-slide-toggle>
    </section>

    <section class="example-section">
      <mat-slide-toggle [(ngModel)]="stickyFooter" 
          [disabled]="false">
        Sticky Footer
      </mat-slide-toggle>
    </section>

   

    <section class="example-section">
      <mat-slide-toggle (change)="ToggleColumnfilter($event)"
          [disabled]="false">
        Columns Filter
      </mat-slide-toggle>
    </section>

    <section class="example-section">
      <mat-slide-toggle (change)="ToggleColumnSelectfilter($event)"
          [disabled]="false">
        Columns Select Filter
      </mat-slide-toggle>
    </section>

    


    <section class="example-section">
      <mat-slide-toggle 
       [(ngModel)]="ColumnFIlterbySelection" 
          [disabled]="false">
        Column Hide/Show by selection
      </mat-slide-toggle>
    </section>

    <section class="example-section">
      <mat-slide-toggle 
       [(ngModel)]="topSearchFilter" 
          [disabled]="false">
        Search
      </mat-slide-toggle>
    </section>
    <section class="example-section">
      <mat-slide-toggle 
       [(ngModel)]="isExpandEnable" 
          [disabled]="false">
          is Expand Enable
      </mat-slide-toggle>
    </section>

    <section class="example-section">
      <mat-slide-toggle 
       [(ngModel)]="dragEnable" 
          [disabled]="false">
          is Dear & Drop Enable
      </mat-slide-toggle>
    </section>

    <!-- <section class="example-section">
      <mat-slide-toggle 
       [(ngModel)]="pagenationEnable" 
          [disabled]="false">
          Pagenation
      </mat-slide-toggle>
    </section> -->

    
  </mat-card-content>
</mat-card>

<mat-form-field appearance="standard" *ngIf="topSearchFilter">
  <mat-label >Filter</mat-label>
  <input matInput  [ngModel]="globalFilter" (ngModelChange)="applyFilter($event)" placeholder="Ex. Mia" #input>
</mat-form-field>
<mat-form-field appearance="fill" style="float: right" *ngIf="ColumnFIlterbySelection">
  <mat-label>Columns</mat-label>
  <mat-select [formControl]="columns" multiple>
    <mat-select-trigger>
      {{columns.value?.[0] || ''}}
      <span *ngIf="(columns.value?.length || 0) > 1" class="example-additional-selection">
        (+{{(columns.value?.length || 0) - 1}} {{columns.value?.length === 2 ? 'other' : 'others'}})
      </span>
    </mat-select-trigger>
    <mat-option *ngFor="let columns of columnsList"   (click)="showhidecolumn(columns)" [value]="columns">{{columns}}</mat-option>
  </mat-select>
</mat-form-field>

<div class="mat-elevation-z8">
  <div style="padding: 10px" *ngIf="addremoveColumns">
  <button mat-raised-button (click)="addColumn()"> Add column </button> &nbsp;&nbsp;&nbsp;&nbsp;
  <button mat-raised-button (click)="removeColumn()"> Remove column </button>
  </div>
  <table mat-table [dataSource]="dataSource" matSort  cdkDropList cdkDropListOrientation="horizontal" multiTemplateDataRows
  (cdkDropListDropped)="drop($event)">

    <!-- ID Column -->
    <ng-container matColumnDef="id"  >
      <th matTooltip = "Header tooltip" mat-header-cell cdkDrag  *matHeaderCellDef mat-sort-header> ID </th>
      <td matTooltip = "cell tooltip" mat-cell *matCellDef="let row" > 
        <div *ngIf="!row.editable"> {{row.id}} </div> 
        <div *ngIf="row.editable"> 
          <mat-form-field appearance="fill">
            <mat-label>Favorite food</mat-label>
            <mat-select>
              <mat-option  >
                One
              </mat-option>
              <mat-option  >
                Two
              </mat-option>
              <mat-option  >
                Three
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>
      </td>
      <td matTooltip = "footer tooltip" mat-footer-cell *matFooterCellDef> ID </td>
    </ng-container>

    <!-- Progress Column -->
    <ng-container matColumnDef="progress">
      <th matTooltip = "Header tooltip" mat-header-cell cdkDrag  *matHeaderCellDef mat-sort-header> Progress </th>
      <td matTooltip = "Cell tooltip" mat-cell *matCellDef="let row"  > 
        <div *ngIf="!row.editable"> {{row.progress}}% </div> 
        <div *ngIf="row.editable"> 
          <mat-form-field class="example-form-field">
            <mat-label>Clearable input</mat-label>
            <input matInput type="text"  >
            <button   matSuffix mat-icon-button aria-label="Clear"  >
              <mat-icon>close</mat-icon>
            </button>
          </mat-form-field>
        </div>

         </td>
    
      <td matTooltip = "footer tooltip" mat-footer-cell *matFooterCellDef> Progress </td>
    </ng-container>

    <!-- Name Column -->
    <ng-container matColumnDef="name">
      <th matTooltip = "Header tooltip" mat-header-cell cdkDrag  *matHeaderCellDef mat-sort-header> Name
        
       </th>
      <td matTooltip = "cell tooltip" mat-cell *matCellDef="let row" >  
        <div *ngIf="!row.editable">  {{row.name}}</div> 
        <div *ngIf="row.editable"> 
          <section class="example-section">
            <mat-checkbox class="example-margin">Checked</mat-checkbox>
          </section>
        </div>
 </td>
      
      <td matTooltip = "footer tooltip" mat-footer-cell *matFooterCellDef> Name </td>
    </ng-container>

    <!-- Fruit Column -->
    <ng-container matColumnDef="fruit">
      <th matTooltip = "Header tooltip" mat-header-cell cdkDrag  *matHeaderCellDef mat-sort-header> Fruit 
      </th>
      <td matTooltip = "cell tooltip" mat-cell *matCellDef="let row" > 
        <div *ngIf="!row.editable">  {{row.fruit}} </div> 
        <div *ngIf="row.editable"> 
          <mat-form-field appearance="fill">
            <mat-label>Choose a date</mat-label>
            <input matInput [matDatepicker]="picker">
            <mat-hint>MM/DD/YYYY</mat-hint>
            <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
            <mat-datepicker #picker></mat-datepicker>
          </mat-form-field>
        </div>
      </td>
      <td matTooltip = "footer tooltip" mat-footer-cell *matFooterCellDef> Fruit </td>
    </ng-container>

    <ng-container matColumnDef="edit">
      <th matTooltip = "Header tooltip" mat-header-cell cdkDrag  *matHeaderCellDef mat-sort-header> edit 
      </th>
      <td matTooltip = "cell tooltip" mat-cell *matCellDef="let row"> 
        <mat-icon *ngIf="!row.editable && !row.editmodal" (click)="editEnable(row)" aria-hidden="false" aria-label="Example home icon" fontIcon="edit_note"></mat-icon> 
        <mat-icon *ngIf="row.editable && !row.editmodal"  (click)="editEnable(row)" aria-hidden="false" aria-label="Example home icon" fontIcon="close"></mat-icon> 

      </td>
      <td matTooltip = "footer tooltip" mat-footer-cell *matFooterCellDef> edit </td>
    </ng-container>

    <ng-container matColumnDef="popup">
      <th mat-header-cell cdkDrag  *matHeaderCellDef mat-sort-header> popup 
      </th>
      <td  mat-cell *matCellDef="let row"> 
      
        <mat-icon   (click)="editPopupEnable(row)" aria-hidden="false" aria-label="Example home icon" fontIcon="edit"></mat-icon> 
      </td>
      <td matTooltip = "footer tooltip" mat-footer-cell *matFooterCellDef> popup </td>
    </ng-container>

    <ng-container matColumnDef="delete">
      <th mat-header-cell cdkDrag  *matHeaderCellDef mat-sort-header> delete 
      </th>
      <td  mat-cell *matCellDef="let row"> 
     
        <mat-icon   (click)="deleteRow(row)" aria-hidden="false" aria-label="Example home icon" fontIcon="delete"></mat-icon> 
      </td>
      <td mat-footer-cell *matFooterCellDef> delete </td>
    </ng-container>

    
    <ng-container  matColumnDef="select"  sticky = {{stikcyColumn}}>
      <th mat-header-cell *matHeaderCellDef>
        <mat-checkbox (change)="$event ? toggleAllRows() : null"
                      [checked]="selection.hasValue() && isAllSelected()"
                      [indeterminate]="selection.hasValue() && !isAllSelected()"
                      [aria-label]="checkboxLabel()">
        </mat-checkbox>
      </th>
      <td mat-cell *matCellDef="let row">
        <mat-checkbox (click)="$event.stopPropagation()"
                      (change)="$event ? selection.toggle(row) : null"
                      [checked]="selection.isSelected(row)"
                      [aria-label]="checkboxLabel(row)">
        </mat-checkbox>
      </td>
      <td mat-footer-cell *matFooterCellDef> ID </td>
    </ng-container>



     <ng-container matColumnDef="expand">
      <th mat-header-cell *matHeaderCellDef aria-label="row actions">&nbsp;</th>
      <td mat-cell *matCellDef="let element">
        <button mat-icon-button aria-label="expand row" (click)="(expandedElement = expandedElement === element ? null : element); $event.stopPropagation()">
          <mat-icon *ngIf="expandedElement !== element">keyboard_arrow_down</mat-icon>
          <mat-icon *ngIf="expandedElement === element">keyboard_arrow_up</mat-icon>
        </button>
      </td>
    </ng-container>  
  
    <!-- Expanded Content Column - The detail row is made up of this one column that spans across all columns -->
     <ng-container matColumnDef="expandedDetail">
      <td mat-cell *matCellDef="let element" [attr.colspan]="columnsToDisplayWithExpand.length">
        <div class="example-element-detail"
             [@detailExpand]="element == expandedElement ? 'expanded' : 'collapsed'">
          <div class="example-element-diagram">
          
          </div>
          <div class="example-element-description">
            test
            <span class="example-element-description-attribution"> -- Wikipedia </span>
          </div>
        </div>
      </td>
    </ng-container>  
  

    <ng-container *ngFor="let headersFilter of headersFilters; let i=index" [matColumnDef]="headersFilter">
      <th mat-header-cell *matHeaderCellDef>
        <div class="filters-container" [class.animate]="toggleFilters">
          <button style="visibility: hidden;" *ngIf="i == 0" mat-icon-button matTooltip="Clear Filters" >
            <mat-icon>search_off</mat-icon>
          </button>
          <mat-form-field *ngIf="i > 0" appearance="outline">
            <input matInput class="form-field" [ngModel]="singleFilter" (ngModelChange)="applysingleFilter($event,headersFilter)" placeholder="Postion Filter">
          </mat-form-field>
        </div>
      </th>
    </ng-container>

    <ng-container *ngFor="let headersSelectFilter of headersSelectFilters; let i=index" [matColumnDef]="headersSelectFilter">
      <th mat-header-cell *matHeaderCellDef>
        <div class="filters-container" [class.animate]="SelecttoggleFilters">

         <mat-form-field appearance="fill">
            <mat-label>Select</mat-label>
            <mat-select (selectionChange)="onSelectionChange($event.value, headersSelectFilter)">
              <mat-option *ngFor="let topping of totalSelectionList[i]" [value]="topping">{{topping}}</mat-option>
            </mat-select>
          </mat-form-field>


          <!-- <mat-form-field *ngIf="i > 0" appearance="fill">
            <mat-label>Toppings</mat-label>
            <mat-select [formControl]="toppings" multiple>
              <mat-select-trigger  (openedChange)="onSelectionChange($event)">
                {{toppings.value?.[0] || ''}}
                <span *ngIf="(toppings.value?.length || 0) > 1" class="example-additional-selection">
                  (+{{(toppings.value?.length || 0) - 1}} {{toppings.value?.length === 2 ? 'other' : 'others'}})
                </span>
              </mat-select-trigger>
              <mat-option *ngFor="let topping of nameList" [value]="topping">{{topping}}</mat-option>
            </mat-select>
          </mat-form-field> -->
        </div>
      </th>
    </ng-container>

<!-- Group Code Starts-->
    <!-- <ng-container matColumnDef="header-row-first-group">
      <th style="text-align: center;" mat-header-cell *matHeaderCellDef  
          [attr.colspan]="2"> 
        First group 
      </th>
    </ng-container>
    
    <ng-container matColumnDef="header-row-second-group">
      <th style="text-align: center;" mat-header-cell *matHeaderCellDef [attr.colspan]="2"> Second group </th>
    </ng-container>
  
    <tr  mat-header-row *matHeaderRowDef="['header-row-first-group', 'header-row-second-group']"></tr> -->
<!-- Group Code ENds -->

    <tr mat-header-row *matHeaderRowDef=" getDisplayedColumns(); sticky: stickyHeader"></tr>
   
    <tr style="height: auto;" mat-header-row class="no-default-height" *matHeaderRowDef="headersSelectFilters"></tr>     
    
    <!-- this for expansion-->
    <tr mat-row *matRowDef="let row; columns:getDisplayedColumns();"    class="example-element-row"
    [class.example-expanded-row]="expandedElement === row"
    (click)="isExpandEnable && expandedElement = expandedElement === row ? null : row">
    </tr> 
    
    <tr style="height: auto;" mat-header-row class="no-default-height" *matHeaderRowDef="headersFilters"></tr>
    
    <!-- <tr  mat-row *matRowDef="let row; columns: getDisplayedColumns();"   class="example-element-row" > </tr> -->


      <tr style="height: auto;" mat-row *matRowDef="let row; columns: ['expandedDetail']" class="example-detail-row"></tr>  
    <tr mat-footer-row *matFooterRowDef="getDisplayedColumns(); sticky: stickyFooter"></tr>

  </table>

  <mat-paginator *ngIf="pagenationEnable"  [pageSizeOptions]="[5, 10, 25, 100]" aria-label="Select page of users"></mat-paginator>
</div>
